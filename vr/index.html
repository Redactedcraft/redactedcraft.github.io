<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>RedactedCraft VR | Immersive Site</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <style>
      .a-enter-vr-button { background-color: #4e9a06 !important; }
    </style>
  </head>
  <body>
    <a-scene>
      <a-entity environment="preset: pixel; seed: 42; dressingAmount: 50; grid: dots; groundColor: #222; skyColor: #111; horizonColor: #333;"></a-entity>
      
      <a-assets>
        <img id="logo" src="../assets/img/logo.png">
        <img id="hero-bg" src="../assets/img/hero_bg.png">
        <!-- Textures will be loaded dynamically or used as IDs -->
      </a-assets>

      <a-entity id="rig" position="0 0 5">
        <a-camera look-controls wasd-controls>
          <a-cursor color="#4e9a06" fuse="false" raycaster="objects: .clickable"></a-cursor>
        </a-camera>
        <a-entity laser-controls="hand: left" raycaster="objects: .clickable; far: 10; showLine: true;"></a-entity>
        <a-entity laser-controls="hand: right" raycaster="objects: .clickable; far: 10; showLine: true;"></a-entity>
      </a-entity>

      <!-- Main UI Header -->
      <a-entity position="0 3.5 -3">
        <a-image src="#logo" width="2" height="0.5" transparent="true"></a-image>
      </a-entity>

      <!-- Navigation Bar -->
      <a-entity id="nav-bar" position="0 2.8 -3">
        <a-entity class="clickable nav-btn" data-target="home" position="-1.2 0 0" geometry="primitive: plane; width: 0.5; height: 0.2" material="color: #4e9a06">
          <a-text value="HOME" align="center" position="0 0 0.01" color="#fff" width="1.5"></a-text>
        </a-entity>
        <a-entity class="clickable nav-btn" data-target="assets" position="-0.6 0 0" geometry="primitive: plane; width: 0.5; height: 0.2" material="color: #444">
          <a-text value="TEXTURES" align="center" position="0 0 0.01" color="#fff" width="1.5"></a-text>
        </a-entity>
        <a-entity class="clickable nav-btn" data-target="lore" position="0 0 0" geometry="primitive: plane; width: 0.5; height: 0.2" material="color: #444">
          <a-text value="LORE" align="center" position="0 0 0.01" color="#fff" width="1.5"></a-text>
        </a-entity>
        <a-entity class="clickable nav-btn" data-target="coding" position="0.6 0 0" geometry="primitive: plane; width: 0.5; height: 0.2" material="color: #444">
          <a-text value="DEVLOG" align="center" position="0 0 0.01" color="#fff" width="1.5"></a-text>
        </a-entity>
        <a-entity class="clickable nav-btn" data-target="about" position="1.2 0 0" geometry="primitive: plane; width: 0.5; height: 0.2" material="color: #444">
          <a-text value="ABOUT" align="center" position="0 0 0.01" color="#fff" width="1.5"></a-text>
        </a-entity>
      </a-entity>

      <!-- Content Panels -->
      <a-entity id="content-parent" position="0 1.5 -3.1">
        
        <!-- HOME PANEL -->
        <a-entity id="panel-home" class="content-panel" visible="true">
          <a-plane color="#2d2d2d" width="4" height="2.2" position="0 0 -0.05"></a-plane>
          <a-text value="The Art of the Pixel" align="center" position="0 0.8 0" color="#e9b96e" width="4"></a-text>
          <a-text value="Redactedcraft is an experimental voxel project focused on performance and aesthetic clarity. Built from scratch in C# using MonoGame." 
                  align="center" position="0 0.3 0" color="#f0f0f0" width="3" wrap-count="40"></a-text>
          
          <a-entity position="0 -0.4 0">
             <a-entity class="clickable" geometry="primitive: plane; width: 2; height: 0.3" material="color: #4e9a06" onclick="window.location.href='../'">
                <a-text value="DOWNLOAD GAME (LATEST)" align="center" position="0 0 0.01" color="#fff" width="2"></a-text>
             </a-entity>
          </a-entity>

          <a-text value="ENGINE ARCHITECTURE" align="center" position="0 -0.8 0" color="#e9b96e" width="3"></a-text>
        </a-entity>

        <!-- ASSETS PANEL -->
        <a-entity id="panel-assets" class="content-panel" visible="false">
          <a-plane color="#2d2d2d" width="4" height="2.2" position="0 0 -0.05"></a-plane>
          <a-text value="TEXTURE LIBRARY" align="center" position="0 0.9 0" color="#e9b96e" width="4"></a-text>
          <a-entity id="texture-grid" position="0 0.2 0"></a-entity>
        </a-entity>

        <!-- LORE PANEL -->
        <a-entity id="panel-lore" class="content-panel" visible="false">
          <a-plane color="#2d2d2d" width="4" height="2.2" position="0 0 -0.05"></a-plane>
          <a-text value="WORLD LORE" align="center" position="0 0.8 0" color="#e9b96e" width="4"></a-text>
          <a-text value="The history of Redactedcraft is still being written.\n\nCheck back later for updates on the world's origins..." 
                  align="center" position="0 0 0" color="#f0f0f0" width="3"></a-text>
        </a-entity>

        <!-- DEVLOG PANEL -->
        <a-entity id="panel-coding" class="content-panel" visible="false">
          <a-plane color="#2d2d2d" width="4" height="2.2" position="0 0 -0.05"></a-plane>
          <a-text value="DEVELOPER LOGS" align="center" position="0 0.9 0" color="#e9b96e" width="4"></a-text>
          <a-entity id="log-list" position="0 0.4 0">
            <!-- Simplified logs -->
            <a-text value="JAN 12: EOS Fixes & Repo Cleanup\nJAN 11: Pro Build Tools Released\nJAN 10: Smart Asset Sync Implemented\nDEC 20: Greedy Meshing Optimization" 
                    align="center" position="0 -0.4 0" color="#ccc" width="2.5" wrap-count="30"></a-text>
          </a-entity>
        </a-entity>

        <!-- ABOUT PANEL -->
        <a-entity id="panel-about" class="content-panel" visible="false">
          <a-plane color="#2d2d2d" width="4" height="2.2" position="0 0 -0.05"></a-plane>
          <a-text value="ABOUT THE DEVELOPER" align="center" position="0 0.8 0" color="#e9b96e" width="4"></a-text>
          <a-text value="Redactedcraft is a passion project developed entirely solo. The goal is to build a modern, high-performance foundation for voxel games." 
                  align="center" position="0 0.2 0" color="#f0f0f0" width="3" wrap-count="40"></a-text>
          
          <a-text value="Visit redactedcraft.github.io\non desktop for more links!" 
                  align="center" position="0 -0.5 0" color="#888" width="2"></a-text>
        </a-entity>

      </a-entity>

      <!-- Ambient Decoration -->
      <a-box position="-5 0.5 -2" src="../assets/img/grass.png" animation="property: rotation; to: 0 360 0; loop: true; dur: 15000"></a-box>
      <a-box position="5 1.5 -2" src="../assets/img/stone.png" animation="property: rotation; to: 0 -360 0; loop: true; dur: 12000"></a-box>
      
      <!-- Back to Main Site Button (Physical exit) -->
      <a-entity class="clickable" position="0 0.5 -3" geometry="primitive: plane; width: 1; height: 0.3" material="color: #333" onclick="window.location.href='../'">
          <a-text value="EXIT VR MODE" align="center" position="0 0 0.01" color="#888" width="1.5"></a-text>
      </a-entity>

    </a-scene>

    <script>
      const textureData = [
          { id: 'grass', name: 'Grass' },
          { id: 'dirt', name: 'Dirt' },
          { id: 'stone', name: 'Stone' },
          { id: 'sand', name: 'Sand' },
          { id: 'wood', name: 'Wood' },
          { id: 'plank', name: 'Plank' },
          { id: 'glass', name: 'Glass' },
          { id: 'artificer_bench', name: 'Artificer' }
      ];

      // Populate Texture Grid
      const grid = document.getElementById('texture-grid');
      textureData.forEach((tex, i) => {
        const x = (i % 4) * 0.8 - 1.2;
        const y = Math.floor(i / 4) * -0.8 + 0.2;
        
        const box = document.createElement('a-box');
        box.setAttribute('position', `${x} ${y} 0`);
        box.setAttribute('scale', '0.4 0.4 0.4');
        box.setAttribute('src', `../assets/img/${tex.id}.png`);
        box.setAttribute('class', 'clickable');
        box.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 5000');
        
        const label = document.createElement('a-text');
        label.setAttribute('value', tex.name);
        label.setAttribute('align', 'center');
        label.setAttribute('position', `${x} ${y - 0.35} 0.1`);
        label.setAttribute('width', '1.5');
        
        grid.appendChild(box);
        grid.appendChild(label);
      });

      // Navigation Logic
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const target = btn.getAttribute('data-target');
          
          // Update Nav Colors
          document.querySelectorAll('.nav-btn').forEach(b => b.setAttribute('material', 'color', '#444'));
          btn.setAttribute('material', 'color', '#4e9a06');
          
          // Toggle Panels
          document.querySelectorAll('.content-panel').forEach(p => p.setAttribute('visible', 'false'));
          document.getElementById('panel-' + target).setAttribute('visible', 'true');
        });

        // Hover effect
        btn.addEventListener('mouseenter', () => {
           if (btn.getAttribute('material').color !== '#4e9a06') {
             btn.setAttribute('material', 'color', '#666');
           }
        });
        btn.addEventListener('mouseleave', () => {
           if (btn.getAttribute('material').color !== '#4e9a06') {
             btn.setAttribute('material', 'color', '#444');
           }
        });
      });

      // Handle the physical "Exit VR" link
      document.querySelectorAll('.clickable').forEach(el => {
        if (!el.classList.contains('nav-btn')) {
          el.addEventListener('click', () => {
            const clickAttr = el.getAttribute('onclick');
            if (clickAttr) {
               const urlMatch = clickAttr.match(/'([^']+)'/);
               if (urlMatch) window.location.href = urlMatch[1];
            }
          });
        }
      });
    </script>
  </body>
</html>